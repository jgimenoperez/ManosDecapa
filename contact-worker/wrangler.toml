name = "manos-decapa-contact-worker"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Environment variables
vars = { DOMAIN = "manosdecapa.es", ADMIN_EMAIL = "fiona@manosdecapa.es", FROM_EMAIL = "noreply@manosdecapa.es", FROM_NAME = "Manos De Capa" }

# Secrets (from .env file)
# These will be set via: wrangler secret put RESEND_API_KEY
# Then paste the key when prompted

# R2 Bucket binding
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "manos-decapa-images"
account_id = "df4054b48d287ad7d72f1713fde9fd03"

# Routes (optional - can be configured later in Cloudflare Dashboard)
# routes = [
#   { pattern = "api.manosdecapa.es/contact", zone_name = "manosdecapa.es" }
# ]

# Build settings
[build]
command = "npm install && npm run build"
cwd = "."
watch_paths = ["src/**/*.ts"]

[build.upload]
format = "service-worker"
